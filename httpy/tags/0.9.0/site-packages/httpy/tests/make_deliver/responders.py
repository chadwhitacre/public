"""Set up a range of different responders.
"""
from email import message_from_string

from httpy import Response


class Responder:    # good boy!
    def respond(self, request):
        raise Response(200, "Greetings, program!")
responder = Responder()
RESPONDER = message_from_string("""\
HTTP/1.0 200 OK
Content-Length: 19
Content-Type: text/plain

Greetings, program!""")

class Failure:      # raises something besides Response
    def respond(self, request):
        raise 'heck'
failure = Failure()
FAILURE = """\
HTTP/1.0 500 Internal Server Error
Content-Length: 19
Content-Type: text/plain

Traceback (most recent call last):

raise 'heck'
"""

class Noop:         # forgets to raise
    def respond(self, request):
        return Response(200, "Greetings, program!")
noop = Noop()
NOOP = """\
HTTP/1.0 500 Internal Server Error
Content-Length: 19
Content-Type: text/plain

Greetings, program!"""


# raises Response with bad attrs

class BadResponseCode:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        response.code = "wheee!"
        raise response

class BadResponseBody:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        response.body = Response(200, "Greetings, program!")
        raise response

class BadResponseHeaders:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        response.headers = "wheee!"
        raise response

bad_response_code = BadResponseCode()
bad_response_body = BadResponseBody()
bad_response_headers = BadResponseHeaders()


# raises Response with missing attrs

class NoResponseCode:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        delattr(response, "code")
        raise response

class NoResponseBody:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        delattr(response, "body")
        raise response

class NoResponseHeaders:
    def respond(self, request):
        response = Response(200, "Greetings, program!")
        delattr(response, "headers")
        raise response

no_response_code = NoResponseCode()
no_response_body = NoResponseBody()
no_response_headers = NoResponseHeaders()



