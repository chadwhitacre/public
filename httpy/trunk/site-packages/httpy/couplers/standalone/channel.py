import traceback

from httpy._zope.server.serverchannelbase import ServerChannelBase
from httpy.couplers.standalone.task import Task
from httpy.couplers.standalone.request import ZopeRequest


class Channel(ServerChannelBase):
    """Represents a channel handled by asyncore.

    The httpy._zope.server machinery instantiates this for each request.

    """
    task_class = Task
    parser_class = ZopeRequest

    def handle_error(self):
        traceback.print_exc()
        self.close()


