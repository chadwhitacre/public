.Dd March 31, 2005
.Os
.Dt SVNEOL 1 LOCAL
.\"
.\"
.\"
.\"
.\"
.Sh NAME
.Nm svneol
.Nd clean up line endings for svn
.\"
.\"
.\"
.\"
.\"
.Sh SYNOPSIS
.Nm
.Op Ar path
.\"
.\"
.\"
.\"
.\"
.Sh DESCRIPTION
When you set the 'svn:eol-style' property on a file in a Subversion repository,
.Xr svn 1
checks the line endings in that file for consistency. If the newlines are
inconsistent -- i.e., they are a mixture of Windows ('\er\en'), legacy Macintosh
('\er'), and/or Unix ('\en') newlines -- then an error is raised and the propset
fails. The file can still be forced into the repository, but then you have
broken data in your repo.

The solution is to clean up the newlines in your text files before trying to
commit them.
.Nm
is a
.Xr python 1
script that makes this easier by intelligently operating on an entire tree at
once.

Specifically,
.Nm
walks the tree rooted at
.Ar path
(which defaults to the current working directory) and cleans up the line endings
in all text files. The definition of a text file is taken from the current
user's
.Xr svn 1
configuration file, which is assumed to be at:
.Bd -literal -offset indent
.Pa ~/.subversion/config
.Ed
.Pp

Text files are those with filenames matching any glob in the [auto-props]
section for which the 'svn:eol-style' property is set. All Windows newlines in
these files are converted to Unix newlines. We don't deal with legacy Macintosh
newlines, since
.Xr svn 1
only runs on versions of Mac OS that use the Unix convention.

Note that the tree does not have to be an
.Xr svn 1
working copy in order to be processed successfully.
.\"
.\"
.\"
.\"
.\"
.Sh IMPLEMENTATION NOTES
This program is known to work with the following software:
.Pp
.Bl -dash -offset indent -compact
.It
FreeBSD 4.11
.It
Python 2.4
.It
Subversion 1.1.0
.El
.\"
.\"
.\"
.\"
.\"
.Sh FILES
.Bd -literal
.Pa ~/.subversion/config
.Ed
.\"
.\"
.\"
.\"
.\"
.Sh EXAMPLES
.Bd -literal
% cd ~/FooProject/
% svneol
locating text files ...................... 952 found
scrubbing newlines ..................... 945 files cleaned
%
.Ed
.\"
.\"
.\"
.\"
.\"
.Sh SEE ALSO
.Xr dos2unix 1 ,
.Xr svn 1
.\"
.\"
.\"
.\"
.\"
.Sh AUTHORS
.Bl -item -compact
.It
(c) 2005 Chad Whitacre <http://www.zetaweb.com/>
.It
This program is beerware. If you like it, buy me a beer someday.
.It
No warranty is expressed or implied.
.El

