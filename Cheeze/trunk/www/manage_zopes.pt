<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1" />
    <title>Zope</title>
    <style>@import url("/manage_page_style.css");
           @import url("style");
           @import url("style_zopes");</style>
</head>

<body>

<h2 tal:define="manage_tabs_message options/manage_tabs_message | nothing"
    tal:replace="structure context/manage_tabs">Tabs</h2>
<div class="padding">

<p>Need help? Please read the <a href="manage_doc">documentation</a>.</p>

<table id="table" tal:define="zope_ids context/zope_ids_list">
    <thead>
        <tr>
            <th style="text-align: left;">Name</th>
            <th>Port</th>
            <th colspan="2">Actions</th>
        </tr>


        <!-- This is the add form -->
        <tr class="green">
        <form action="zope_add" method="post"
              tal:define="availaskel context/skel_list;
                          skel_root  context/skel_root;">
            <td>
                <input name="name:required" type="text"/>
                <select name="skel:required"
                        tal:condition="availaskel">
                    <option value="">which skel?</option>
                    <option tal:repeat="skel availaskel"
                            tal:attributes="value skel;
                                            selected python:test(
                                              skel=='default','selected','');
                                           "
                            tal:content="skel" />
                    <option value="|stock|">zope stock</option>
                </select>
                <input type="hidden" name="skel" value="|stock|"
                       tal:condition="not:availaskel" />
            </td>
            <td><select name="port:int"
                        tal:condition="context/vhosting">
                    <option tal:repeat="port context/list_ports" tal:content="port" />
                </select>
                <input type="text"
                       name="port:int:required"
                       value="80"
                       size="3"
                       style="text-align: right;"
                       tal:condition="not:context/vhosting" />
            </td>
            <td colspan="2" class="action">
                <input type="submit" value="create" />
            </td>
        </form>
        </tr>

    </thead>
    <tbody tal:condition="zope_ids">

        <!-- Now loop through all our zopes and make a form for each -->
        <tr tal:repeat="zope_id zope_ids">
        <form action="zope_edit" method="post"
              tal:define="info python:context.zope_info_get(zope_id)">
            <td>
                <input type="text"
                       name="new_name:required"
                       value="80"
                       style="width: 100%;"
                       tal:condition="not:context/vhosting"
                       tal:attributes="value python:info[0]" /></td>
                <input type="hidden" name="old_name"
                       tal:attributes="value python:info[0]" />
            <td>
                <input type="text"
                       name="new_port:int:required"
                       value="80"
                       size="3"
                       style="text-align: right;"
                       tal:condition="not:context/vhosting"
                       tal:attributes="value python:info[1]" />
                <input type="hidden" name="old_port"
                       tal:attributes="value python:info[1]" />
            </td>
            <td class="action">
                <input type="submit"
                       value="submit"
                       class="save"
                       title="save" />
            </td>
            <td class="action">
                <a tal:attributes="href python:'zope_remove?zope_id=%s' % zope_id">
                    <img style="border:none;" src="image_delete" alt="delete" title="delete" />
                </a>
            </td>
        </form>
        </tr>

    </tbody>
    <tbody tal:condition="not:zope_ids">

        <tr>
            <td colspan="3">
                There are no Zope instances in <b tal:content="context/instance_root" />.
            </td>
        </tr>

    </tbody>
</table>
</div>
</body>
</html>