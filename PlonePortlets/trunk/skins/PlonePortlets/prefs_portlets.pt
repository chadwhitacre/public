<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
            />

<body  define="dummy python:request.set('disable_border',1)" >

<div metal:fill-slot="prefs_configlet_main"
    tal:define="portletstool nocall:here/portal_portlets">

  <h1>set up portlets</h1>
  <div class="description">This is a preliminary user-interface for assigning portlets</div>
   <form action="setPortletConfig" method="post">
   
   
   <fieldset style="width : 35%" tal:repeat="column python:['column1','column2']">
        <legend tal:content="column">The left portlets</legend>
                
          <div tal:define="portlets portletstool/getAvailablePortlets; 
                             colportlets python:portletstool.getPortletsSectionExplicit(portletstool,column); 
                             colportletUIDs python:[i.UID for i in colportlets]">
            <div tal:repeat="portlet portlets">
            
                <input type="checkbox" name="column1:list" tal:attributes="value portlet/UID;name string:${column}:list;checked python:portlet.UID in colportletUIDs" />
                <strong tal:content="portlet/Title"></strong> (<a tal:attributes="href string:${portlet/getURL}/base_edit">edit</a>)
                <div  class="discreet" tal:content="portlet/Description"></div>
            </div>
          </div>
      </fieldset>
      
      
     <fieldset style="display:block;float:none">
        <input type="submit" name="Apply" />
     </fieldset>
      
      
  </form>
  
  
   
</div>

</body>
</html>

